apiVersion: v1
kind: Secret
metadata:
  name: smap-stt-secrets
  namespace: smap
  labels:
    app: smap-speech-to-text
type: Opaque
stringData:
  # =================================================================
  # ⚠️  SECURITY WARNING: DO NOT COMMIT REAL CREDENTIALS TO GIT!
  # Replace these placeholder values before deploying to production.
  # Consider using: Sealed Secrets, External Secrets, or kubectl create secret
  # =================================================================

  # API Security
  INTERNAL_API_KEY: "CHANGE_ME_IN_PRODUCTION"

  # MinIO Credentials
  MINIO_ACCESS_KEY: "CHANGE_ME_IN_PRODUCTION"
  MINIO_SECRET_KEY: "CHANGE_ME_IN_PRODUCTION"

  # Redis Password (for async job state management)
  REDIS_PASSWORD: "CHANGE_ME_IN_PRODUCTION"
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: smap-stt-config
  namespace: smap
  labels:
    app: smap-speech-to-text
data:
  API_HOST:           "0.0.0.0"
  API_PORT:           "8000"
  API_WORKERS:        "2"
  APP_NAME:           "Speech-to-Text API"
  APP_VERSION:        "1.0.0"

  DEBUG:              "false"
  
  ENVIRONMENT:        "production"
  LOG_FILE:           "logs/stt.log"
  LOG_LEVEL:          "INFO"
  
  MAX_UPLOAD_SIZE_MB: "500"
  MINIO_ENDPOINT:     "http://172.16.19.115:9000"
  
  TRANSCRIBE_TIMEOUT_SECONDS: "90"

  WHISPER_CHUNK_DURATION:    "30"
  WHISPER_CHUNK_ENABLED:     "true"
  WHISPER_CHUNK_OVERLAP:     "1"
  WHISPER_LANGUAGE:          "vi"
  WHISPER_MODEL:             "base"
  WHISPER_MODEL_SIZE:        "base"
  WHISPER_N_THREADS:         "0"

  REDIS_HOST:                "redis-service.smap.svc.cluster.local"
  REDIS_PORT:                "6379"
  REDIS_DB:                  "0"
  REDIS_JOB_TTL:             "3600"
