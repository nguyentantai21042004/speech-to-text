apiVersion: v1
kind: Secret
metadata:
  name: smap-stt-secrets
  namespace: smap
  labels:
    app: smap-speech-to-text
type: Opaque
stringData:
  # =================================================================
  # ⚠️  SECURITY WARNING: DO NOT COMMIT REAL CREDENTIALS TO GIT!
  # Replace these placeholder values before deploying to production.
  # Consider using: Sealed Secrets, External Secrets, or kubectl create secret
  # =================================================================

  # API Security
  INTERNAL_API_KEY: "CHANGE_ME_IN_PRODUCTION"

  # MinIO Credentials
  MINIO_ACCESS_KEY: "CHANGE_ME_IN_PRODUCTION"
  MINIO_SECRET_KEY: "CHANGE_ME_IN_PRODUCTION"

  # Redis Password (for async job state management)
  REDIS_PASSWORD: "CHANGE_ME_IN_PRODUCTION"
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: smap-stt-config
  namespace: smap
  labels:
    app: smap-speech-to-text
data:
  # Application Configuration
  APP_NAME: "Speech-to-Text API"
  APP_VERSION: "1.0.0"
  ENVIRONMENT: "production"
  DEBUG: "false"

  # API Configuration
  API_HOST: "0.0.0.0"
  API_PORT: "8000"
  API_WORKERS: "2"
  MAX_UPLOAD_SIZE_MB: "500"

  # Whisper Model Configuration
  WHISPER_MODEL_SIZE: "base"  # Options: base (default), small, medium
  WHISPER_LANGUAGE: "en"
  WHISPER_MODEL: "base"
  WHISPER_N_THREADS: "0"  # 0 for auto-detect (recommended)

  # Chunking Configuration (Production-Ready Feature)
  WHISPER_CHUNK_ENABLED: "true"
  WHISPER_CHUNK_DURATION: "30"  # seconds
  WHISPER_CHUNK_OVERLAP: "1"    # seconds

  # Timeout Configuration
  TRANSCRIBE_TIMEOUT_SECONDS: "90"

  # MinIO Configuration
  MINIO_ENDPOINT: "http://minio-service.stt.svc.cluster.local:9000"  # Adjust for your environment

  # Logging
  LOG_LEVEL: "INFO"
  LOG_FILE: "logs/stt.log"

  # Redis Configuration (for async job state management)
  REDIS_HOST: "redis-service.smap.svc.cluster.local"  # Adjust for your environment
  REDIS_PORT: "6379"
  REDIS_DB: "0"
  REDIS_JOB_TTL: "3600"  # 1 hour TTL for job state
